{"version":3,"sources":["webpack:///./src/database.js","webpack:///src/components/Messages.vue","webpack:///./src/components/Messages.vue?89df","webpack:///./src/components/Messages.vue","webpack:///src/components/NewMessage.vue","webpack:///./src/components/NewMessage.vue?f464","webpack:///./src/components/NewMessage.vue","webpack:///./src/const.js","webpack:///src/components/AuthForm.vue","webpack:///./src/components/AuthForm.vue?ee40","webpack:///./src/components/AuthForm.vue","webpack:///src/components/UserHeader.vue","webpack:///./src/components/UserHeader.vue?7468","webpack:///./src/components/UserHeader.vue","webpack:///src/components/Users.vue","webpack:///./src/utils.js","webpack:///./src/components/Users.vue?aa31","webpack:///./src/components/Users.vue","webpack:///src/App.vue","webpack:///./src/App.vue?b8d1","webpack:///./src/App.vue","webpack:///./src/store/modules/auth.js","webpack:///./src/store/modules/messageForm.js","webpack:///./src/store/modules/dialogs.js","webpack:///./src/store/modules/users.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["window","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","database","getDBRef","documentName","ref","Messages","name","computed","extends_default","Object","vuex_esm","messageIdForEditMode","state","messageForm","id","currentUserId","auth","messagesMap","dialogs","messages","messagesList","values_default","filter","message","selectedDialog","methods","deleteMessage","_ref","this","child","remove","openEditMessageMode","_ref2","updateFormData","text","document","getElementById","focus","cancelEditMessageMode","resetFormData","components_Messages","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","length","_l","key","timestamp","class","isReply","userId","isSender","_v","_s","userName","charAt","_e","edit","trim","icon","on","click","$event","preventDefault","_m","staticRenderFns","role","src_components_Messages","__webpack_require__","normalizeComponent","ssrContext","NewMessage","typingUsers","users","usersMap","dialogsDBPath","namesOfTypingUsers","_this","keys_default","reduce","res","concat","toConsumableArray_default","get","$store","set","value","saveTypingUser","isTyping","saveNewMessage","_this2","push","Date","now","error","Error","updateMessage","_this3","update","updatedAt","handleInputKeypress","event","handleFormSubmit","components_NewMessage","submit","directives","rawName","expression","placeholder","rows","domProps","keypress","input","target","composing","nameOfTypingUser","type","src_components_NewMessage","NewMessage_normalizeComponent","authMode","signUp","signIn","AuthForm","data","email","password","mode","isAuthorizing","setMode","signInWithEmail","signUpWithEmail","setIsAuthorizing","components_AuthForm","for","disabled","aria-hidden","href","src_components_AuthForm","AuthForm_normalizeComponent","UserHeader","initSignOut","signOut","components_UserHeader","src_components_UserHeader","UserHeader_normalizeComponent","Users","isUsersListVisible","usersList","Users__this","toggleUsersList","openDialogWithUser","loadDialogMessages","otherUserId","sort","join","created","snapshot","saveNewUserInStore","user","val","components_Users","App","components","Users_normalizeComponent","isAuthLoaded","onAuthStateChanged","providerData","uid","_providerData$","displayName","photoURL","setUserData","image","updateProfile","bind","resetUserData","selectortype_template_index_0_src_App","staticStyle","width","height","src_App","App_normalizeComponent","Vue","use","Vuex","undefined","mutations","commitUserData","context","commit","namespaced","actions","_ref3","createUserWithEmailAndPassword","then","_ref4","responseFromAddNewUser","_ref5","catch","console","log","finally","_ref6","signInWithEmailAndPassword","_ref7","updateSelectedDialog","defineProperty_default","updateTypingUser","path","setTimeout","messagesEl","scrollTop","scrollHeight","store","Store","modules","library","add","faEdit","faTimesCircle","faUndo","faSave","component","FontAwesomeIcon","config","productionTip","el","template"],"mappings":"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","file":"static/js/app.4f7161d01a97aaebf1d0.js","sourcesContent":["const config = {\n  apiKey: 'AIzaSyDeQSrnOySw3Ws-PT1Isq_8-FeIS2B-PZw',\n  authDomain: 'vue-chat-room-11def.firebaseapp.com',\n  databaseURL: 'https://vue-chat-room-11def.firebaseio.com',\n  projectId: 'vue-chat-room-11def',\n  storageBucket: 'vue-chat-room-11def.appspot.com',\n  messagingSenderId: '249927196895'\n}\n\nwindow.firebase.initializeApp(config)\nconst database = window.firebase.database()\n\nexport const getDBRef = (documentName) => {\n  return database.ref(documentName)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/database.js","<template>\n  <div class=\"messages\" id=\"messages\">\n\n    <div v-if=\"!messagesList.length\" class=\"messages__loader d-flex justify-content-center\">\n      <div class=\"spinner-border\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n\n    <div\n      v-else\n      :key=\"message.timestamp\"\n      class=\"message\"\n      v-bind:class=\"{isReply: message.userId !== currentUserId, isSender: message.userId === currentUserId}\"\n      v-for=\"message in messagesList\"\n    >\n      <div class=\"message__content\">\n        <span class=\"message__icon\" v-if=\"message.userId !== currentUserId\">{{ message.userName.charAt(0) }}</span>\n        <div v-bind:class=\"{edit: message.id === messageIdForEditMode}\" class=\"message__text\">\n          <span>\n            {{ message.text.trim() }}\n          </span>\n          <div v-if=\"message.userId === currentUserId\" class=\"message__text-icons\">\n            <div v-if=\"message.id !== messageIdForEditMode\">\n              <font-awesome-icon\n                class=\"message__text-icon\"\n                icon=\"edit\"\n                v-on:click.prevent=\"openEditMessageMode({ id: message.id })\"\n              />\n              <font-awesome-icon\n                class=\"message__text-icon\"\n                icon=\"times-circle\"\n                v-on:click.prevent=\"deleteMessage({ id: message.id })\"\n              />\n            </div>\n            <div v-else>\n              <!--<font-awesome-icon-->\n              <!--class=\"message__text-icon\"-->\n              <!--icon=\"save\"-->\n              <!--v-on:click.prevent=\"saveEditedMessage({ id: message.id })\"-->\n              <!--/>-->\n              <font-awesome-icon\n                class=\"message__text-icon\"\n                icon=\"undo\"\n                v-on:click.prevent=\"cancelEditMessageMode({ id: message.id })\"\n              />\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapState } from 'vuex'\nimport { getDBRef } from '../database'\n\nexport default {\n  name: 'Messages',\n  computed: {\n    ...mapState({\n      messageIdForEditMode: state => state.messageForm.id,\n      currentUserId: state => state.auth.id,\n      messagesMap: state => state.dialogs.messages,\n      messagesList: state => Object.values(state.dialogs.messages).filter(message => message),\n      selectedDialog: state => state.dialogs.selectedDialog\n    })\n  },\n  methods: {\n    ...mapMutations('messageForm', ['updateFormData', 'resetFormData']),\n\n    deleteMessage: function ({ id }) {\n      getDBRef(`dialogs/${this.selectedDialog}/messages`).child(id).remove()\n    },\n\n    openEditMessageMode: function ({ id }) {\n      this.updateFormData({\n        text: this.messagesMap[id].text,\n        id: id\n      })\n\n      document.getElementById('message-form-input').focus()\n    },\n\n    cancelEditMessageMode: function () {\n      this.resetFormData()\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .messages {\n    height: calc(100vh - 500px);\n    border: 1px solid #c1c1c1;\n    border-radius: 5px;\n    padding: 10px;\n    display: flex;\n    flex-direction: column;\n    overflow-y: auto;\n  }\n\n  .messages__loader {\n    align-items: center;\n    flex-grow: 1;\n  }\n\n  .message {\n    font-weight: bold;\n    margin-bottom: 5px;\n  }\n\n  .message__text {\n    padding: 5px 20px;\n    border-radius: 30px;\n    margin-bottom: 0;\n    max-width: 75%;\n    display: flex;\n    flex-wrap: nowrap;\n    align-items: center;\n  }\n\n  .message__text > span {\n    text-align: left;\n  }\n\n  .message.isSender .message__text {\n    background-color: #0099FF;\n    margin-left: auto;\n    color: white;\n  }\n\n  .message.isSender .message__text.edit {\n    background-color: orangered;\n  }\n\n  .message.isReply .message__text {\n    background-color: #ffdd82;\n    color: #002c49;\n    margin-right: auto;\n  }\n\n  .message__content {\n    display: flex;\n    align-items: center;\n  }\n\n  .message__icon {\n    padding: 5px;\n    border-radius: 50%;\n    background-color: pink;\n    width: 30px;\n    height: 30px;\n    margin-right: 5px;\n  }\n\n  .message__text-icons {\n    margin-left: 10px;\n    display: flex;\n    width: 50px;\n  }\n\n  .message__text-icon {\n    cursor: pointer;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Messages.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"messages\",attrs:{\"id\":\"messages\"}},[(!_vm.messagesList.length)?_c('div',{staticClass:\"messages__loader d-flex justify-content-center\"},[_vm._m(0)]):_vm._l((_vm.messagesList),function(message){return _c('div',{key:message.timestamp,staticClass:\"message\",class:{isReply: message.userId !== _vm.currentUserId, isSender: message.userId === _vm.currentUserId}},[_c('div',{staticClass:\"message__content\"},[(message.userId !== _vm.currentUserId)?_c('span',{staticClass:\"message__icon\"},[_vm._v(_vm._s(message.userName.charAt(0)))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"message__text\",class:{edit: message.id === _vm.messageIdForEditMode}},[_c('span',[_vm._v(\"\\n          \"+_vm._s(message.text.trim())+\"\\n        \")]),_vm._v(\" \"),(message.userId === _vm.currentUserId)?_c('div',{staticClass:\"message__text-icons\"},[(message.id !== _vm.messageIdForEditMode)?_c('div',[_c('font-awesome-icon',{staticClass:\"message__text-icon\",attrs:{\"icon\":\"edit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.openEditMessageMode({ id: message.id })}}}),_vm._v(\" \"),_c('font-awesome-icon',{staticClass:\"message__text-icon\",attrs:{\"icon\":\"times-circle\"},on:{\"click\":function($event){$event.preventDefault();return _vm.deleteMessage({ id: message.id })}}})],1):_c('div',[_c('font-awesome-icon',{staticClass:\"message__text-icon\",attrs:{\"icon\":\"undo\"},on:{\"click\":function($event){$event.preventDefault();return _vm.cancelEditMessageMode({ id: message.id })}}})],1)]):_vm._e()])])])})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spinner-border\",attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1783cb8c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Messages.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1783cb8c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Messages.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1783cb8c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Messages.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1783cb8c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Messages.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"new-message\">\n    <form v-on:submit.prevent=\"handleFormSubmit\">\n      <div class=\"form-group new-message-form\">\n        <textarea\n          v-on:keypress=\"handleInputKeypress\"\n          id=\"message-form-input\"\n          v-model=\"text\"\n          class=\"form-control\"\n          placeholder=\"Your message\"\n          rows=\"3\">\n        </textarea>\n        <div class=\"typing-info\">\n          <i v-bind:key=\"nameOfTypingUser\" v-for=\"nameOfTypingUser of namesOfTypingUsers\">\n            {{ nameOfTypingUser }} is typing...\n          </i>\n        </div>\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">{{ id ? 'Update' : 'Send New' }} Message</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations, mapActions } from 'vuex'\nimport { getDBRef } from '../database'\n\nexport default {\n  name: 'NewMessage',\n  computed: {\n    ...mapState({\n      id: state => state.messageForm.id,\n      userName: state => state.auth.name,\n      userId: state => state.auth.id,\n      typingUsers: state => state.dialogs.typingUsers,\n      users: state => state.users.usersMap,\n      dialogsDBPath: state => `dialogs/${state.dialogs.selectedDialog}/messages`\n    }),\n    namesOfTypingUsers: function () {\n      return Object.keys(this.typingUsers).reduce((res, userId) => {\n        if (!this.typingUsers[userId] || userId === this.userId) {\n          return res\n        }\n        return [...res, this.users[userId].name]\n      }, [])\n    },\n    text: {\n      get () {\n        return this.$store.state.messageForm.text\n      },\n      set (value) {\n        if (value && !this.typingUsers[this.userId]) {\n          this.saveTypingUser({ userId: this.userId, isTyping: true })\n        }\n        if (!value) {\n          this.saveTypingUser({ userId: this.userId, isTyping: false })\n        }\n\n        this.updateFormData({ text: value, id: this.id })\n      }\n    }\n  },\n  methods: {\n    ...mapMutations('messageForm', ['updateFormData', 'resetFormData']),\n    ...mapActions('dialogs', ['saveTypingUser']),\n\n    saveNewMessage: function () {\n      getDBRef(this.dialogsDBPath).push({\n        userName: this.userName,\n        userId: this.userId,\n        text: this.text,\n        timestamp: Date.now()\n      }, (error) => {\n        if (error) {\n          throw new Error('Can not send the message')\n        }\n        this.resetFormData()\n      })\n    },\n\n    updateMessage: function () {\n      getDBRef(this.dialogsDBPath).child(this.id).update({\n        text: this.text,\n        updatedAt: Date.now()\n      }, (error) => {\n        if (error) {\n          throw new Error('Can not update the message')\n        }\n        this.resetFormData()\n      })\n    },\n\n    handleInputKeypress: function (event) {\n      if (event.key === 'Enter') {\n        this.handleFormSubmit()\n      }\n    },\n\n    handleFormSubmit: function () {\n      this.saveTypingUser({ userId: this.userId, isTyping: false })\n      this.id ? this.updateMessage() : this.saveNewMessage()\n    }\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n  .new-message {\n    margin-top: 10px;\n  }\n\n  .typing-info {\n    height: 24px;\n    margin-top: 5px;\n    font-weight: bold;\n  }\n\n  .new-message-form {\n    margin-bottom: 5px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/NewMessage.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"new-message\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleFormSubmit($event)}}},[_c('div',{staticClass:\"form-group new-message-form\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"form-control\",attrs:{\"id\":\"message-form-input\",\"placeholder\":\"Your message\",\"rows\":\"3\"},domProps:{\"value\":(_vm.text)},on:{\"keypress\":_vm.handleInputKeypress,\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"typing-info\"},_vm._l((_vm.namesOfTypingUsers),function(nameOfTypingUser){return _c('i',{key:nameOfTypingUser},[_vm._v(\"\\n          \"+_vm._s(nameOfTypingUser)+\" is typing...\\n        \")])}),0)]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(_vm._s(_vm.id ? 'Update' : 'Send New')+\" Message\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41642670\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/NewMessage.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41642670\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./NewMessage.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewMessage.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./NewMessage.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41642670\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./NewMessage.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-41642670\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/NewMessage.vue\n// module id = null\n// module chunks = ","export const authMode = {\n  signUp: 'Sign Up',\n  signIn: 'Sign In'\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/const.js","<template>\n  <div>\n    <form v-on:submit.prevent=\"handleFormSubmit\">\n      <div v-if=\"mode === authMode.signUp\" class=\"form-group\">\n        <label for=\"user-name\">Name</label>\n        <input v-model=\"name\" type=\"text\" class=\"form-control\" id=\"user-name\" placeholder=\"Name\">\n      </div>\n\n      <div class=\"form-group\">\n        <label for=\"user-email\">Email address</label>\n        <input v-model=\"email\" type=\"email\" class=\"form-control\" id=\"user-email\" placeholder=\"Enter email\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"user-password\">Password</label>\n        <input v-model=\"password\" type=\"password\" class=\"form-control\" id=\"user-password\" placeholder=\"Password\">\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\" v-bind:disabled=\"isAuthorizing\">\n        <span v-if=\"!isAuthorizing\">\n          {{ mode }}\n        </span>\n        <span v-else>\n          <span class=\"spinner-border spinner-border-sm\" role=\"status\" aria-hidden=\"true\"></span>\n          Authorizing...\n        </span>\n      </button>\n    </form>\n    <div class=\"dropdown-divider\"></div>\n    <div v-if=\"mode === authMode.signIn\">\n      <a v-on:click.prevent=\"setMode(authMode.signUp)\" class=\"dropdown-item\" href=\"#\">New around here? Sign up</a>\n      <a class=\"dropdown-item\" href=\"#\">Forgot password?</a>\n    </div>\n    <div v-else>\n      <a v-on:click.prevent=\"setMode(authMode.signIn)\" class=\"dropdown-item\" href=\"#\">Already have account? Sign in</a>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState, mapMutations } from 'vuex'\nimport { authMode } from '../const'\n\nexport default {\n  name: 'AuthForm',\n  data () {\n    return {\n      authMode,\n      email: '',\n      password: '',\n      name: '',\n      mode: authMode.signIn\n    }\n  },\n  computed: {\n    ...mapState({\n      isAuthorizing: state => state.auth.isAuthorizing\n    })\n  },\n  methods: {\n    ...mapActions('auth', ['signUpWithEmail', 'signInWithEmail']),\n    ...mapMutations('auth', ['setIsAuthorizing']),\n    setMode: function (mode) {\n      this.mode = mode\n    },\n    signIn: function () {\n      this.signInWithEmail({ email: this.email, password: this.password })\n    },\n    signUp: function () {\n      this.signUpWithEmail({ email: this.email, password: this.password, name: this.name })\n    },\n    handleFormSubmit: function () {\n      this.setIsAuthorizing(true)\n      this.mode === authMode.signIn ? this.signIn() : this.signUp()\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AuthForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleFormSubmit($event)}}},[(_vm.mode === _vm.authMode.signUp)?_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"user-name\"}},[_vm._v(\"Name\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"user-name\",\"placeholder\":\"Name\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"user-email\"}},[_vm._v(\"Email address\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.email),expression:\"email\"}],staticClass:\"form-control\",attrs:{\"type\":\"email\",\"id\":\"user-email\",\"placeholder\":\"Enter email\"},domProps:{\"value\":(_vm.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.email=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"user-password\"}},[_vm._v(\"Password\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],staticClass:\"form-control\",attrs:{\"type\":\"password\",\"id\":\"user-password\",\"placeholder\":\"Password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}})]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.isAuthorizing}},[(!_vm.isAuthorizing)?_c('span',[_vm._v(\"\\n        \"+_vm._s(_vm.mode)+\"\\n      \")]):_c('span',[_c('span',{staticClass:\"spinner-border spinner-border-sm\",attrs:{\"role\":\"status\",\"aria-hidden\":\"true\"}}),_vm._v(\"\\n        Authorizing...\\n      \")])])]),_vm._v(\" \"),_c('div',{staticClass:\"dropdown-divider\"}),_vm._v(\" \"),(_vm.mode === _vm.authMode.signIn)?_c('div',[_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.setMode(_vm.authMode.signUp)}}},[_vm._v(\"New around here? Sign up\")]),_vm._v(\" \"),_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"}},[_vm._v(\"Forgot password?\")])]):_c('div',[_c('a',{staticClass:\"dropdown-item\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.setMode(_vm.authMode.signIn)}}},[_vm._v(\"Already have account? Sign in\")])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c06818e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AuthForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6c06818e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AuthForm.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AuthForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AuthForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c06818e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AuthForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6c06818e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AuthForm.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"user-header\">\n    <h2 class=\"user-header__text\">Hello, {{ userName }}!</h2>\n    <button type=\"button\" v-on:click=\"initSignOut\" class=\"btn btn-primary\">Sign Out</button>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState } from 'vuex'\n\nexport default {\n  name: 'UserHeader',\n  computed: {\n    ...mapState({\n      userName: state => state.auth.name\n    })\n  },\n  methods: {\n    ...mapActions('auth', ['signOut']),\n    initSignOut: function () {\n      this.signOut()\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .user-header {\n    margin-bottom: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .user-header__text {\n    margin-right: 10px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/UserHeader.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-header\"},[_c('h2',{staticClass:\"user-header__text\"},[_vm._v(\"Hello, \"+_vm._s(_vm.userName)+\"!\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.initSignOut}},[_vm._v(\"Sign Out\")])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1ea91767\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/UserHeader.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1ea91767\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./UserHeader.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserHeader.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./UserHeader.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1ea91767\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./UserHeader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1ea91767\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/UserHeader.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"users\">\n    <div class=\"btn-group\">\n      <button\n        v-on:click=\"toggleUsersList\"\n        class=\"btn btn-secondary btn-lg dropdown-toggle\"\n        type=\"button\"\n      >\n        Users list\n      </button>\n      <div v-if=\"isUsersListVisible\" class=\"dropdown-menu visible\">\n        <ul class=\"users-list\">\n          <li\n            v-on:click=\"openDialogWithUser({ id: user.id })\"\n            class=\"user-item\"\n            v-bind:key=\"user.id\"\n            v-for=\"user in usersList\"\n          >\n            {{ user.name }}\n          </li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions, mapState, mapMutations } from 'vuex'\nimport { getDBRef } from '../database'\nimport { getDialogId } from '../utils'\n\nexport default {\n  name: 'Users',\n  data () {\n    return {\n      isUsersListVisible: false\n    }\n  },\n  computed: {\n    ...mapState({\n      currentUserId: state => state.auth.id,\n      usersList: state => Object.values(state.users.usersMap).filter(({ id }) => id !== this.currentUserId)\n    })\n  },\n  methods: {\n    ...mapMutations('users', ['saveNewUserInStore']),\n    ...mapActions('dialogs', ['loadDialogMessages']),\n    toggleUsersList: function () {\n      this.isUsersListVisible = !this.isUsersListVisible\n    },\n    openDialogWithUser: function ({ id }) {\n      this.toggleUsersList()\n      this.loadDialogMessages({ selectedDialog: getDialogId({ currentUserId: this.currentUserId, otherUserId: id }) })\n    }\n  },\n  created () {\n    getDBRef('users').on('child_added', (snapshot) => {\n      if (snapshot.key !== this.currentUserId) {\n        this.saveNewUserInStore({ user: snapshot.val() })\n      }\n    })\n  }\n}\n</script>\n\n<style scoped>\n  .dropdown-menu.visible {\n    display: block;\n    padding: 0;\n  }\n\n  .users {\n    text-align: left;\n  }\n\n  .users-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n    height: 300px;\n    width: 300px;\n  }\n\n  .user-item {\n    padding: 10px;\n    font-size: 16px;\n    cursor: pointer;\n    transition: all .7s;\n    font-weight: bold;\n  }\n\n  .user-item:hover {\n    background-color: grey;\n    color: white;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Users.vue","export const getDialogId = ({ currentUserId, otherUserId }) => [currentUserId, otherUserId].sort().join('-')\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"users\"},[_c('div',{staticClass:\"btn-group\"},[_c('button',{staticClass:\"btn btn-secondary btn-lg dropdown-toggle\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.toggleUsersList}},[_vm._v(\"\\n      Users list\\n    \")]),_vm._v(\" \"),(_vm.isUsersListVisible)?_c('div',{staticClass:\"dropdown-menu visible\"},[_c('ul',{staticClass:\"users-list\"},_vm._l((_vm.usersList),function(user){return _c('li',{key:user.id,staticClass:\"user-item\",on:{\"click\":function($event){return _vm.openDialogWithUser({ id: user.id })}}},[_vm._v(\"\\n          \"+_vm._s(user.name)+\"\\n        \")])}),0)]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7f98718f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Users.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7f98718f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Users.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Users.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Users.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7f98718f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Users.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7f98718f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Users.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <div v-if=\"!isAuthLoaded\" class=\"page-loader-wrapper\">\n      <div class=\"spinner-grow\" style=\"width: 5rem; height: 5rem;\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n      </div>\n    </div>\n    <div v-else class=\"app-container\">\n      <div class=\"app-header\">\n        <Users v-if=\"userId\" />\n        <div class=\"main-icon\"></div>\n      </div>\n      <AuthForm v-if=\"!userId\" />\n      <div v-else>\n        <UserHeader />\n        <div v-if=\"selectedDialog\">\n          <Messages/>\n          <NewMessage/>\n        </div>\n        <h3 v-else>Please select a user to start a dialog with</h3>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapMutations, mapState } from 'vuex'\nimport Messages from './components/Messages'\nimport NewMessage from './components/NewMessage'\nimport AuthForm from './components/AuthForm'\nimport UserHeader from './components/UserHeader'\nimport Users from './components/Users'\n\nexport default {\n  name: 'App',\n  components: {\n    UserHeader,\n    Messages,\n    NewMessage,\n    AuthForm,\n    Users\n  },\n  data: () => ({\n    isAuthLoaded: false\n  }),\n  computed: {\n    ...mapState({\n      userId: state => state.auth.id,\n      isAuthorizing: state => state.auth.isAuthorizing,\n      selectedDialog: state => state.dialogs.selectedDialog\n    })\n  },\n  methods: {\n    ...mapMutations('auth', ['setUserData', 'resetUserData'])\n  },\n  created () {\n    window.firebase.auth().onAuthStateChanged((user) => {\n      if (!this.isAuthLoaded) {\n        this.isAuthLoaded = true\n      }\n\n      if (user) {\n        if (!this.userId && !this.isAuthorizing) {\n          const { providerData, uid } = user\n          const { displayName, photoURL, email } = providerData[0]\n          this.setUserData({\n            name: displayName,\n            image: photoURL,\n            email,\n            id: uid,\n            updateProfile: user.updateProfile.bind(user)\n          })\n        }\n      } else {\n        this.userId && this.resetUserData()\n      }\n    })\n  }\n}\n</script>\n\n<style>\n  html {\n    height: 100%;\n  }\n\n  body {\n    height: 100%;\n  }\n\n  .page-loader-wrapper {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  }\n\n  .main-icon {\n    background-image: URL('https://homkin.ru/wp-content/uploads/2018/06/pig27.jpg');\n    background-repeat: no-repeat;\n    background-size: 290px;\n    background-position: center;\n    width: 180px;\n    height: 180px;\n    border-radius: 50%;\n    margin-left: auto;\n    margin-right: auto;\n    margin-bottom: 10px;\n  }\n\n  #app {\n    font-family: 'Avenir', Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    width: 75%;\n    min-width: 450px;\n    margin: 0 auto;\n    height: 100%;\n  }\n\n  .app-container {\n    margin-top: 20px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isAuthLoaded)?_c('div',{staticClass:\"page-loader-wrapper\"},[_vm._m(0)]):_c('div',{staticClass:\"app-container\"},[_c('div',{staticClass:\"app-header\"},[(_vm.userId)?_c('Users'):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"main-icon\"})],1),_vm._v(\" \"),(!_vm.userId)?_c('AuthForm'):_c('div',[_c('UserHeader'),_vm._v(\" \"),(_vm.selectedDialog)?_c('div',[_c('Messages'),_vm._v(\" \"),_c('NewMessage')],1):_c('h3',[_vm._v(\"Please select a user to start a dialog with\")])],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"spinner-grow\",staticStyle:{\"width\":\"5rem\",\"height\":\"5rem\"},attrs:{\"role\":\"status\"}},[_c('span',{staticClass:\"sr-only\"},[_vm._v(\"Loading...\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-16912465\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-16912465\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-16912465\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { getDBRef } from '../../database'\n\nVue.use(Vuex)\n\nconst state = {\n  id: '',\n  name: '',\n  image: '',\n  email: '',\n  updateProfile: undefined,\n  isAuthorizing: false\n}\n\nconst mutations = {\n  setIsAuthorizing (state, isAuthorizing) {\n    state.isAuthorizing = isAuthorizing\n  },\n  setUserData (state, { id, name, image, email, updateProfile }) {\n    state.id = id\n    state.name = name\n    state.image = image\n    state.email = email\n    state.updateProfile = updateProfile\n  },\n  resetUserData () {\n    state.id = ''\n    state.name = ''\n    state.image = ''\n    state.email = ''\n    state.updateProfile = undefined\n  }\n}\n\nconst commitUserData = ({ context, user, name }) => {\n  const { providerData } = user\n  context.commit('setUserData', {\n    name: name || providerData[0].displayName,\n    image: providerData[0].photoURL,\n    email: providerData[0].email,\n    id: user.uid,\n    updateProfile: user.updateProfile.bind(user)\n  })\n}\n\nconst actions = {\n  signUpWithEmail (context, { email, password, name }) {\n    window.firebase.auth().createUserWithEmailAndPassword(email, password)\n      .then(({ user }) => user.updateProfile({ displayName: name }).then(() => user))\n      .then((user) => {\n        return getDBRef(`users/${user.uid}`).set({\n          name,\n          id: user.uid\n        }).then(responseFromAddNewUser => ({ responseFromAddNewUser, user }))\n      })\n      .then(({ user }) => {\n        commitUserData({ context, user, name })\n      })\n      .catch((error) => {\n        console.log('sign up error', error)\n      })\n      .finally(() => {\n        context.commit('setIsAuthorizing', false)\n      })\n  },\n  signInWithEmail (context, { email, password }) {\n    window.firebase.auth().signInWithEmailAndPassword(email, password)\n      .then(({ user }) => {\n        commitUserData({ context, user })\n      })\n      .catch((error) => {\n        console.log('sign in error', error)\n      })\n      .finally(() => {\n        context.commit('setIsAuthorizing', false)\n      })\n  },\n  signOut (context) {\n    window.firebase.auth().signOut()\n      .then(() => {\n        context.commit('resetUserData')\n      })\n      .catch(error => {\n        console.log('error', error)\n      })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/auth.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst state = {\n  text: '',\n  id: undefined\n}\n\nconst mutations = {\n  updateFormData (state, { text, id }) {\n    state.text = text\n    state.id = id\n  },\n\n  resetFormData (state) {\n    state.text = ''\n    state.id = ''\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/messageForm.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { getDBRef } from '../../database'\n\nVue.use(Vuex)\n\nconst state = {\n  selectedDialog: '',\n  messages: {},\n  typingUsers: {}\n}\n\nconst mutations = {\n  updateSelectedDialog: function (state, { selectedDialog }) {\n    state.selectedDialog = selectedDialog\n  },\n  updateMessage: function (state, { message }) {\n    state.messages = {\n      ...state.messages,\n      [message.key]: message.val\n    }\n  },\n  updateTypingUser: function (state, { userId, isTyping }) {\n    state.typingUsers = {\n      ...state.typingUsers,\n      [userId]: isTyping\n    }\n  }\n}\n\nconst actions = {\n  loadDialogMessages (context, { selectedDialog }) {\n    context.commit('updateSelectedDialog', { selectedDialog })\n    // TODO Need to reset previous subscription\n    const path = `dialogs/${selectedDialog}/messages`\n    getDBRef(path).on('child_added', (snapshot) => {\n      context.commit('updateMessage', { message: { key: snapshot.key, val: { ...snapshot.val(), id: snapshot.key } } })\n      setTimeout(() => {\n        const messagesEl = document.getElementById('messages')\n        messagesEl.scrollTop = messagesEl.scrollHeight\n      }, 100)\n    })\n    getDBRef(path).on('child_changed', (snapshot) => {\n      context.commit('updateMessage', { message: { key: snapshot.key, val: { ...snapshot.val(), id: snapshot.key } } })\n    })\n    getDBRef(path).on('child_removed', (snapshot) => {\n      context.commit('updateMessage', { message: { key: snapshot.key, val: null } })\n    })\n\n    getDBRef(`dialogs/${selectedDialog}/typingUsers`).on('child_added', (snapshot) => {\n      context.commit('updateTypingUser', { userId: snapshot.key, isTyping: snapshot.val() })\n    })\n    getDBRef(`dialogs/${selectedDialog}/typingUsers`).on('child_changed', (snapshot) => {\n      context.commit('updateTypingUser', { userId: snapshot.key, isTyping: snapshot.val() })\n    })\n  },\n\n  saveTypingUser (context, { userId, isTyping }) {\n    getDBRef(`dialogs/${context.state.selectedDialog}/typingUsers`).update({ [userId]: isTyping })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/dialogs.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst state = {\n  usersMap: {}\n}\n\nconst mutations = {\n  saveNewUserInStore: function (state, { user }) {\n    state.usersMap = { ...state.usersMap, [user.id]: user }\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/users.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport auth from './modules/auth'\nimport messageForm from './modules/messageForm'\nimport dialogs from './modules/dialogs'\nimport users from './modules/users'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  modules: {\n    auth,\n    messageForm,\n    dialogs,\n    users\n  }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport { library } from '@fortawesome/fontawesome-svg-core'\nimport { faEdit, faTimesCircle, faUndo, faSave } from '@fortawesome/free-solid-svg-icons'\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\nimport App from './App'\nimport store from './store'\n\nlibrary.add(faEdit)\nlibrary.add(faTimesCircle)\nlibrary.add(faUndo)\nlibrary.add(faSave)\n\nVue.component('font-awesome-icon', FontAwesomeIcon)\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  components: { App },\n  template: '<App/>',\n  store\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}